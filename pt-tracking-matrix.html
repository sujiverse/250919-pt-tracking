<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PT ì¶”ì  ë§¤íŠ¸ë¦­ìŠ¤ - ê°€ë¡œ ë¬´í•œ ìŠ¤í¬ë¡¤</title>
    <style>
        :root {
            /* ì¹˜ë£Œì‚¬ë³„ ê³ ìœ  ìƒ‰ê¹” */
            --ì¹˜ë£Œì‚¬1-bg: #FFE5E5;
            --ì¹˜ë£Œì‚¬1-border: #FF6B6B;
            --ì¹˜ë£Œì‚¬1-text: #C92A2A;
            --ì¹˜ë£Œì‚¬2-bg: #E5F3FF;
            --ì¹˜ë£Œì‚¬2-border: #4DABF7;
            --ì¹˜ë£Œì‚¬2-text: #1971C2;
            --ì¹˜ë£Œì‚¬3-bg: #E5FFE5;
            --ì¹˜ë£Œì‚¬3-border: #69DB7C;
            --ì¹˜ë£Œì‚¬3-text: #2F9E44;
            --ì¹˜ë£Œì‚¬4-bg: #FFF5E5;
            --ì¹˜ë£Œì‚¬4-border: #FFB366;
            --ì¹˜ë£Œì‚¬4-text: #E8590C;
            --ì¹˜ë£Œì‚¬5-bg: #F3E5FF;
            --ì¹˜ë£Œì‚¬5-border: #B197FC;
            --ì¹˜ë£Œì‚¬5-text: #7950F2;
            --ì¹˜ë£Œì‚¬6-bg: #E5FFFF;
            --ì¹˜ë£Œì‚¬6-border: #66D9EF;
            --ì¹˜ë£Œì‚¬6-text: #0CA678;
            --ì¹˜ë£Œì‚¬7-bg: #FFFFE5;
            --ì¹˜ë£Œì‚¬7-border: #FFE066;
            --ì¹˜ë£Œì‚¬7-text: #E67E22;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            overflow: hidden;
        }

        .container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .header .subtitle {
            font-size: 14px;
            opacity: 0.9;
        }

        .matrix-wrapper {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .matrix-container {
            display: flex;
            height: 100%;
        }

        /* í™˜ìëª… ê³ ì • ì—´ */
        .patient-column {
            width: 150px;
            background: white;
            border-right: 3px solid #ddd;
            z-index: 10;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
        }

        .patient-header {
            height: 60px;
            background: #343a40;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
        }

        .patient-cell {
            height: 80px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            font-weight: 600;
            color: #495057;
            position: relative;
        }

        .patient-cell:hover {
            background: #f8f9fa;
        }

        .patient-cell.first-visit {
            border-left: 4px solid #28a745;
        }

        /* ë°ì´í„° ìŠ¤í¬ë¡¤ ì˜ì—­ */
        .data-scroll {
            flex: 1;
            overflow-x: auto;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #6c757d #e9ecef;
        }

        .data-scroll::-webkit-scrollbar {
            height: 12px;
            width: 12px;
        }

        .data-scroll::-webkit-scrollbar-track {
            background: #e9ecef;
        }

        .data-scroll::-webkit-scrollbar-thumb {
            background: #6c757d;
            border-radius: 6px;
        }

        .data-scroll::-webkit-scrollbar-thumb:hover {
            background: #495057;
        }

        .data-grid {
            display: inline-block;
            min-width: fit-content;
        }

        /* ë‚ ì§œ í—¤ë” */
        .date-header {
            display: flex;
            height: 60px;
            position: sticky;
            top: 0;
            z-index: 5;
            background: white;
            border-bottom: 3px solid #ddd;
        }

        .date-cell {
            width: 120px;
            min-width: 120px;
            border-right: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            font-weight: bold;
            font-size: 14px;
            color: #495057;
        }

        .date-cell:hover {
            background: #e9ecef;
        }

        /* í™˜ìë³„ ë°ì´í„° í–‰ */
        .patient-row {
            display: flex;
            height: 80px;
            border-bottom: 1px solid #e9ecef;
        }

        .treatment-cell {
            width: 120px;
            min-width: 120px;
            border-right: 1px solid #e9ecef;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .treatment-cell:hover {
            transform: scale(1.02);
            z-index: 2;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .treatment-cell.empty {
            background: #ffffff;
        }

        .treatment-cell.empty:hover {
            background: #f8f9fa;
        }

        /* ì¹˜ë£Œì‚¬ë³„ ë°°ê²½ ìƒ‰ê¹” */
        .treatment-cell.therapist-ì¹˜ë£Œì‚¬1 {
            background: var(--ì¹˜ë£Œì‚¬1-bg);
            border: 2px solid var(--ì¹˜ë£Œì‚¬1-border);
            color: var(--ì¹˜ë£Œì‚¬1-text);
        }

        .treatment-cell.therapist-ì¹˜ë£Œì‚¬2 {
            background: var(--ì¹˜ë£Œì‚¬2-bg);
            border: 2px solid var(--ì¹˜ë£Œì‚¬2-border);
            color: var(--ì¹˜ë£Œì‚¬2-text);
        }

        .treatment-cell.therapist-ì¹˜ë£Œì‚¬3 {
            background: var(--ì¹˜ë£Œì‚¬3-bg);
            border: 2px solid var(--ì¹˜ë£Œì‚¬3-border);
            color: var(--ì¹˜ë£Œì‚¬3-text);
        }

        .treatment-cell.therapist-ì¹˜ë£Œì‚¬4 {
            background: var(--ì¹˜ë£Œì‚¬4-bg);
            border: 2px solid var(--ì¹˜ë£Œì‚¬4-border);
            color: var(--ì¹˜ë£Œì‚¬4-text);
        }

        .treatment-cell.therapist-ì¹˜ë£Œì‚¬5 {
            background: var(--ì¹˜ë£Œì‚¬5-bg);
            border: 2px solid var(--ì¹˜ë£Œì‚¬5-border);
            color: var(--ì¹˜ë£Œì‚¬5-text);
        }

        .treatment-cell.therapist-ì¹˜ë£Œì‚¬6 {
            background: var(--ì¹˜ë£Œì‚¬6-bg);
            border: 2px solid var(--ì¹˜ë£Œì‚¬6-border);
            color: var(--ì¹˜ë£Œì‚¬6-text);
        }

        .treatment-cell.therapist-ì¹˜ë£Œì‚¬7 {
            background: var(--ì¹˜ë£Œì‚¬7-bg);
            border: 2px solid var(--ì¹˜ë£Œì‚¬7-border);
            color: var(--ì¹˜ë£Œì‚¬7-text);
        }

        .treatment-text {
            font-weight: bold;
            font-size: 13px;
            text-align: center;
            line-height: 1.2;
        }

        .therapist-name {
            font-size: 10px;
            opacity: 0.8;
            margin-top: 2px;
        }

        .first-visit-star {
            position: absolute;
            top: 2px;
            right: 2px;
            color: #ffc107;
            font-size: 16px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        /* ë²”ë¡€ */
        .legend {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 100;
        }

        .legend h3 {
            font-size: 14px;
            margin-bottom: 10px;
            color: #495057;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
            font-size: 12px;
        }

        .legend-color {
            width: 20px;
            height: 15px;
            margin-right: 8px;
            border-radius: 3px;
            border: 1px solid #ddd;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .patient-column {
                width: 100px;
            }

            .date-cell, .treatment-cell {
                width: 100px;
                min-width: 100px;
            }

            .treatment-text {
                font-size: 11px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¥ PT ì¶”ì  ë§¤íŠ¸ë¦­ìŠ¤</h1>
            <div class="subtitle">í™˜ìë³„ ì¹˜ë£Œ í˜„í™© â€¢ ê°€ë¡œ ë¬´í•œ ìŠ¤í¬ë¡¤ â€¢ 2025.06~08</div>
        </div>

        <div class="matrix-wrapper">
            <div class="matrix-container">
                <!-- í™˜ìëª… ê³ ì • ì—´ -->
                <div class="patient-column">
                    <div class="patient-header">í™˜ìëª…</div>
                    <div id="patient-list">
                        <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                    </div>
                </div>

                <!-- ë°ì´í„° ìŠ¤í¬ë¡¤ ì˜ì—­ -->
                <div class="data-scroll" id="dataScroll">
                    <div class="data-grid">
                        <!-- ë‚ ì§œ í—¤ë” -->
                        <div class="date-header" id="dateHeader">
                            <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                        </div>

                        <!-- í™˜ìë³„ ë°ì´í„° í–‰ë“¤ -->
                        <div id="patientRows">
                            <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì¹˜ë£Œì‚¬ë³„ ìƒ‰ê¹” ë²”ë¡€ -->
        <div class="legend">
            <h3>ğŸ‘©â€âš•ï¸ ì¹˜ë£Œì‚¬</h3>
            <div class="legend-item">
                <div class="legend-color" style="background: var(--ì¹˜ë£Œì‚¬1-bg); border-color: var(--ì¹˜ë£Œì‚¬1-border);"></div>
                ì¹˜ë£Œì‚¬1
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: var(--ì¹˜ë£Œì‚¬2-bg); border-color: var(--ì¹˜ë£Œì‚¬2-border);"></div>
                ì¹˜ë£Œì‚¬2
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: var(--ì¹˜ë£Œì‚¬3-bg); border-color: var(--ì¹˜ë£Œì‚¬3-border);"></div>
                ì¹˜ë£Œì‚¬3
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: var(--ì¹˜ë£Œì‚¬4-bg); border-color: var(--ì¹˜ë£Œì‚¬4-border);"></div>
                ì¹˜ë£Œì‚¬4
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: var(--ì¹˜ë£Œì‚¬5-bg); border-color: var(--ì¹˜ë£Œì‚¬5-border);"></div>
                ì¹˜ë£Œì‚¬5
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: var(--ì¹˜ë£Œì‚¬6-bg); border-color: var(--ì¹˜ë£Œì‚¬6-border);"></div>
                ì¹˜ë£Œì‚¬6
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: var(--ì¹˜ë£Œì‚¬7-bg); border-color: var(--ì¹˜ë£Œì‚¬7-border);"></div>
                ì¹˜ë£Œì‚¬7
            </div>
            <div style="margin-top: 10px; font-size: 11px; color: #6c757d;">
                â­ = ì²«ë‚´ì›<br>
                D.3/10(4) = Dì½”ìŠ¤, 10íšŒ ì¤‘ 3ì°¨, ì˜¬í•´ 4ë²ˆì§¸
            </div>
        </div>
    </div>

    <script>
        // ìƒ˜í”Œ ë°ì´í„° ìƒì„±
        const sampleData = generateSampleData();

        // DOM ìš”ì†Œë“¤
        const patientList = document.getElementById('patient-list');
        const dateHeader = document.getElementById('dateHeader');
        const patientRows = document.getElementById('patientRows');
        const dataScroll = document.getElementById('dataScroll');

        // í™”ë©´ ë Œë”ë§
        renderMatrix(sampleData);

        function generateSampleData() {
            const therapists = ['ì¹˜ë£Œì‚¬1', 'ì¹˜ë£Œì‚¬2', 'ì¹˜ë£Œì‚¬3', 'ì¹˜ë£Œì‚¬4', 'ì¹˜ë£Œì‚¬5', 'ì¹˜ë£Œì‚¬6', 'ì¹˜ë£Œì‚¬7'];
            const courses = ['A', 'B', 'C', 'D', 'E'];
            const patients = [
                'í™˜ì101A', 'í™˜ì102A', 'í™˜ì103A', 'í™˜ì104A', 'í™˜ì105A', 'í™˜ì106A',
                'í™˜ì107A', 'í™˜ì108A', 'í™˜ì109A', 'í™˜ì110A', 'í™˜ì101B', 'í™˜ì102B',
                'í™˜ì103B', 'í™˜ì104B', 'í™˜ì105B', 'í™˜ì106B', 'í™˜ì107B', 'í™˜ì108B'
            ];

            // ë‚ ì§œ ìƒì„± (2025.06.01ë¶€í„° 90ì¼)
            const startDate = new Date(2025, 5, 1); // 2025ë…„ 6ì›” 1ì¼
            const dates = [];
            for (let i = 0; i < 90; i++) {
                const date = new Date(startDate);
                date.setDate(startDate.getDate() + i);
                dates.push(String(date.getMonth() + 1).padStart(2, '0') + '/' +
                           String(date.getDate()).padStart(2, '0'));
            }

            // ë§¤íŠ¸ë¦­ìŠ¤ ë°ì´í„° ìƒì„±
            const matrix = {};
            patients.forEach(patient => {
                matrix[patient] = {};

                // ê° í™˜ìë§ˆë‹¤ ëœë¤í•œ ì¹˜ë£Œ ê¸°ë¡ ìƒì„±
                const visitCount = Math.floor(Math.random() * 8) + 3; // 3-10íšŒ
                const visitDates = [];

                for (let i = 0; i < visitCount; i++) {
                    const randomDate = dates[Math.floor(Math.random() * dates.length)];
                    if (!visitDates.includes(randomDate)) {
                        visitDates.push(randomDate);
                    }
                }

                visitDates.sort().forEach((date, index) => {
                    const therapist = therapists[Math.floor(Math.random() * therapists.length)];
                    const course = courses[Math.floor(Math.random() * courses.length)];
                    const packageTotal = [5, 10, 15, 20][Math.floor(Math.random() * 4)];
                    const packageCurrent = Math.min(index + 1, packageTotal);
                    const yearlyVisit = index + 1;

                    matrix[patient][date] = {
                        text: `${course}.${packageCurrent}/${packageTotal}(${yearlyVisit})`,
                        therapist: therapist,
                        course: course,
                        isFirstVisit: index === 0
                    };
                });
            });

            return {
                patients: patients,
                dates: dates,
                matrix: matrix
            };
        }

        function renderMatrix(data) {
            // í™˜ì ëª©ë¡ ë Œë”ë§
            patientList.innerHTML = data.patients.map(patient => `
                <div class="patient-cell ${data.matrix[patient] && Object.values(data.matrix[patient]).some(v => v.isFirstVisit) ? 'first-visit' : ''}">
                    ${patient}
                </div>
            `).join('');

            // ë‚ ì§œ í—¤ë” ë Œë”ë§
            dateHeader.innerHTML = data.dates.map(date => `
                <div class="date-cell">${date}</div>
            `).join('');

            // í™˜ìë³„ ë°ì´í„° í–‰ ë Œë”ë§
            patientRows.innerHTML = data.patients.map(patient => {
                const rowCells = data.dates.map(date => {
                    const treatment = data.matrix[patient][date];
                    if (treatment) {
                        return `
                            <div class="treatment-cell therapist-${treatment.therapist}"
                                 title="${patient} - ${date} - ${treatment.text} (${treatment.therapist})">
                                ${treatment.isFirstVisit ? '<div class="first-visit-star">â­</div>' : ''}
                                <div class="treatment-text">${treatment.text}</div>
                                <div class="therapist-name">[${treatment.therapist}]</div>
                            </div>
                        `;
                    } else {
                        return `<div class="treatment-cell empty"></div>`;
                    }
                }).join('');

                return `<div class="patient-row">${rowCells}</div>`;
            }).join('');
        }

        // í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
        document.addEventListener('keydown', function(e) {
            const scrollAmount = 240; // 2ì…€ ë¶„ëŸ‰

            switch(e.key) {
                case 'ArrowLeft':
                    dataScroll.scrollLeft -= scrollAmount;
                    e.preventDefault();
                    break;
                case 'ArrowRight':
                    dataScroll.scrollLeft += scrollAmount;
                    e.preventDefault();
                    break;
                case 'Home':
                    dataScroll.scrollLeft = 0;
                    e.preventDefault();
                    break;
                case 'End':
                    dataScroll.scrollLeft = dataScroll.scrollWidth;
                    e.preventDefault();
                    break;
            }
        });

        // ë§ˆìš°ìŠ¤ íœ  ê°€ë¡œ ìŠ¤í¬ë¡¤
        dataScroll.addEventListener('wheel', function(e) {
            if (e.shiftKey || e.deltaX !== 0) {
                e.preventDefault();
                dataScroll.scrollLeft += e.deltaY || e.deltaX;
            }
        });

        console.log('ğŸ¥ PT ì¶”ì  ë§¤íŠ¸ë¦­ìŠ¤ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');
        console.log('âŒ¨ï¸  ì¢Œ/ìš° í™”ì‚´í‘œ: ìŠ¤í¬ë¡¤ | Shift+íœ : ê°€ë¡œìŠ¤í¬ë¡¤ | Home/End: ì²˜ìŒ/ë');
    </script>
</body>
</html>